{
  "test_cases": [
    {
      "test_id": "INT-001",
      "name": "Basic LONG signal with 2 TPs",
      "description": "Standard trading signal with complete fields including entry range, stop loss, and two take profit levels",
      "message_text": "#–∏–¥–µ—è BTC/USDT 4H üìà\n\n–¢–æ—Ä–≥–æ–≤–∞—è –∏–¥–µ—è –Ω–∞ –õ–û–ù–ì –ø–æ –±–∏—Ç–∫–æ–∏–Ω—É\n\n–í—Ö–æ–¥: 62500 - 63000\n–°—Ç–æ–ø: 61500\n–¢–µ–π–∫ 1: 64500\n–¢–µ–π–∫ 2: 66000\n\n–†–∏—Å–∫: 2%\n\n‚ö†Ô∏è –í—Ö–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –æ–±—ä–µ–º–æ–≤",
      "has_image": false,
      "image_file": null,
      "reply_to_test_id": null,
      "expected_parsed": {
        "pair": "BTC/USDT",
        "direction": "LONG",
        "timeframe": "4H",
        "entry_range": {
          "min": 62500.0,
          "max": 63000.0
        },
        "sl": 61500.0,
        "tp1": 64500.0,
        "tp2": 66000.0,
        "tp3": null,
        "risk_percent": 2.0
      },
      "expected_translation_contains": [
        "Trading idea",
        "BTC/USDT",
        "LONG",
        "Entry",
        "Stop",
        "Take"
      ],
      "wait_seconds": 15
    },
    {
      "test_id": "INT-002",
      "name": "SHORT signal with 3 TPs",
      "description": "Comprehensive SHORT signal with three take profit levels and tight entry range",
      "message_text": "#–ò–î–ï–Ø ETH/USDT 1H üìâ\n\nüî¥ –®–û–†–¢ –ø–æ —ç—Ñ–∏—Ä–∏—É–º—É\n\n–ó–æ–Ω–∞ –≤—Ö–æ–¥–∞: 2480 - 2520 üí∞\n–°—Ç–æ–ø –ª–æ—Å—Å: 2570\n\n–¶–µ–ª–∏:\n–¢–µ–π–∫ 1: 2400 üéØ\n–¢–µ–π–∫ 2: 2350 üéØ\n–¢–µ–π–∫ 3: 2280 üéØ\n\n–†–∏—Å–∫ 1.5% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞\n\nüìä –°–∏–≥–Ω–∞–ª –∞–∫—Ç—É–∞–ª–µ–Ω –ø—Ä–∏ –ø—Ä–æ–±–æ–µ —É—Ä–æ–≤–Ω—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏\n‚è∞ –¢–∞–π–º—Ñ—Ä–µ–π–º: 1 —á–∞—Å",
      "has_image": false,
      "image_file": null,
      "reply_to_test_id": null,
      "expected_parsed": {
        "pair": "ETH/USDT",
        "direction": "SHORT",
        "timeframe": "1H",
        "entry_range": {
          "min": 2480.0,
          "max": 2520.0
        },
        "sl": 2570.0,
        "tp1": 2400.0,
        "tp2": 2350.0,
        "tp3": 2280.0,
        "risk_percent": 1.5
      },
      "expected_translation_contains": [
        "Trading idea",
        "ETH/USDT",
        "SHORT",
        "Entry zone",
        "Stop loss",
        "Take profit"
      ],
      "wait_seconds": 15
    },
    {
      "test_id": "INT-003",
      "name": "Signal WITH IMAGE (OCR test)",
      "description": "Minimal text signal with chart image requiring OCR to extract trading parameters",
      "message_text": "#–∏–¥–µ—è SOL/USDT 15M\n\nüöÄ –°–º–æ—Ç—Ä–∏–º –õ–û–ù–ì –ø–æ –°–æ–ª—è–Ω–µ\n\n–î–µ—Ç–∞–ª–∏ –Ω–∞ —Å–∫—Ä–∏–Ω–µ üëá\n\n‚ö°Ô∏è –ë—ã—Å—Ç—Ä–∞—è —Å–¥–µ–ª–∫–∞, —Å–ª–µ–¥–∏–º –∑–∞ –æ–±—ä–µ–º–∞–º–∏!",
      "has_image": true,
      "image_file": "mock_images/signal_ocr_1.png",
      "reply_to_test_id": null,
      "expected_parsed": {
        "pair": "SOL/USDT",
        "direction": "LONG",
        "timeframe": "15M",
        "entry_range": null,
        "sl": null,
        "tp1": null,
        "tp2": null,
        "tp3": null,
        "risk_percent": null
      },
      "expected_ocr_contains": [
        "SOLUSDT",
        "SOL",
        "Entry",
        "Stop",
        "Target"
      ],
      "expected_translation_contains": [
        "Trading idea",
        "SOL/USDT",
        "LONG",
        "Details in the screenshot"
      ],
      "wait_seconds": 20
    },
    {
      "test_id": "INT-004",
      "name": "REPLY to INT-001 (threading test)",
      "description": "Update message replying to original signal, indicating first take profit hit and stop loss moved to breakeven",
      "message_text": "‚úÖ 1 —Ç–µ–π–∫ –≤–∑—è—Ç, —Å—Ç–æ–ø –≤ –±/—É üî•\n\n–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–µ—Ä–∂–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –¥–æ 2–≥–æ —Ç–µ–π–∫–∞\n\nüí™ –û—Ç–ª–∏—á–Ω–∞—è —Å–¥–µ–ª–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, +2.4% —É–∂–µ –≤ –∫–∞—Ä–º–∞–Ω–µ",
      "has_image": false,
      "image_file": null,
      "reply_to_test_id": "INT-001",
      "expected_parsed": null,
      "expected_translation_contains": [
        "Take profit 1 hit",
        "stop loss",
        "breakeven",
        "holding position"
      ],
      "wait_seconds": 15
    },
    {
      "test_id": "INT-005",
      "name": "Minimal signal (only pair and direction)",
      "description": "Bare minimum signal with just pair, direction, and timeframe - testing parser flexibility",
      "message_text": "#–∏–¥–µ—è DOGE/USDT 5M\n\nüêï –®–û–†–¢ –ø–æ –¥–æ–≥—É\n\n–†–∞–∑–≤–æ—Ä–æ—Ç–Ω–∞—è —Å–≤–µ—á–∞ –Ω–∞ 5 –º–∏–Ω—É—Ç–∫–µ, –∂–¥—É —Å–Ω–∏–∂–µ–Ω–∏—è\n\n‚ö†Ô∏è –ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã, –≤—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å!\n\n–£—Ä–æ–≤–Ω–∏ —Å–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –ø–æ —Å–∏—Ç—É–∞—Ü–∏–∏ üìä",
      "has_image": false,
      "image_file": null,
      "reply_to_test_id": null,
      "expected_parsed": {
        "pair": "DOGE/USDT",
        "direction": "SHORT",
        "timeframe": "5M",
        "entry_range": null,
        "sl": null,
        "tp1": null,
        "tp2": null,
        "tp3": null,
        "risk_percent": null
      },
      "expected_translation_contains": [
        "Trading idea",
        "DOGE/USDT",
        "SHORT",
        "high volatility"
      ],
      "wait_seconds": 15
    },
    {
      "test_id": "INT-006",
      "name": "Russian-only image (Nano Banana Pro test)",
      "description": "Image with ONLY Russian text - tests image text translation with Gemini Image model",
      "message_text": "#–∏–¥–µ—è BTC/USDT 4H\n\nüìä –°–∏–≥–Ω–∞–ª –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ\n\n–í—Å–µ –¥–µ—Ç–∞–ª–∏ –Ω–∞ —Å–∫—Ä–∏–Ω–µ, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç–µ!",
      "has_image": true,
      "image_file": "mock_images/signal_russian_only.png",
      "reply_to_test_id": null,
      "expected_parsed": {
        "pair": "BTC/USDT",
        "direction": null,
        "timeframe": "4H",
        "entry_range": null,
        "sl": null,
        "tp1": null,
        "tp2": null,
        "tp3": null,
        "risk_percent": null
      },
      "expected_image_text_translated": [
        "Entry",
        "Take",
        "Stop",
        "Long",
        "Signal",
        "Risk"
      ],
      "expected_translation_contains": [
        "Trading idea",
        "BTC/USDT",
        "screenshot",
        "details"
      ],
      "wait_seconds": 25
    }
  ],
  "metadata": {
    "version": "1.1.0",
    "created_date": "2025-12-03",
    "description": "Integration test cases for Telegram Signal Translator Bot",
    "total_tests": 6,
    "test_types": {
      "basic_signals": 2,
      "image_signals": 2,
      "reply_messages": 1,
      "minimal_signals": 1
    },
    "notes": [
      "Test IDs are used to establish reply threading relationships",
      "wait_seconds indicates expected processing time for each test",
      "OCR tests require longer wait times due to image processing",
      "All Russian text should be translated to English in bot output",
      "Parser should handle case-insensitive #–∏–¥–µ—è and #–ò–î–ï–Ø markers"
    ]
  }
}
