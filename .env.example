# ==============================================================================
# Telegram Signal Translator Bot - Configuration Template
# ==============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# SECURITY: Never commit .env to version control!
# ==============================================================================

# ============ TELEGRAM ACCOUNTS ============

# Reader Account (Reads from SOURCE_GROUP)
# Get your API credentials at: https://my.telegram.org/apps
READER_API_ID=1234567
READER_API_HASH=abcdef123456789abcdef123456789ab
READER_PHONE=+1234567890

# Session configuration (choose ONE method):
# Method 1 (RECOMMENDED for Docker): Use session strings
# Generate these by running: python auth_local.py
READER_SESSION_STRING=

# Method 2 (Legacy): Use session files (requires interactive auth in Docker)
# READER_SESSION_FILE=sessions/reader.session

# Publisher Account (Writes to TARGET_GROUP)
# Must be a DIFFERENT account from Reader
PUBLISHER_API_ID=9876543
PUBLISHER_API_HASH=zyxwvu987654321zyxwvu987654321zy
PUBLISHER_PHONE=+0987654321

# Session configuration (choose ONE method):
# Method 1 (RECOMMENDED for Docker): Use session strings
# Generate these by running: python auth_local.py
PUBLISHER_SESSION_STRING=

# Method 2 (Legacy): Use session files (requires interactive auth in Docker)
# PUBLISHER_SESSION_FILE=sessions/publisher.session

# ============ GROUP IDs ============

# Telegram group IDs (must start with -100 for supergroups)
# To get group ID: add @userinfobot to the group, it will show the ID
SOURCE_GROUP_ID=-100123456789
TARGET_GROUP_ID=-100987654321

# Optional: Forward original messages to another group (uncomment to enable)
# FORWARD_GROUP_ID=-100123456789

# Optional: Comma-separated list of user IDs allowed to post signals
# If empty, all users in the group can post signals
SOURCE_ALLOWED_USERS=123456789,987654321,555666777

# ============ GEMINI API ============

# Get your API key at: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=AIzaSy...

# Model for text translation
GEMINI_MODEL=gemini-2.0-flash

# Model for image text editing (translates Russian text on images to English)
# Options: gemini-2.5-flash-image (stable), gemini-3-pro-image-preview (beta)
GEMINI_IMAGE_MODEL=gemini-2.5-flash-image

# ============ OPENAI API (Optional) ============

# Optional: For vision OCR using GPT-4 Vision
# Get your API key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=
OPENAI_VISION_MODEL=gpt-4o

# ============ ANTHROPIC API (Optional) ============

# Optional: For vision OCR using Claude
# Get your API key at: https://console.anthropic.com/
ANTHROPIC_API_KEY=
ANTHROPIC_VISION_MODEL=claude-sonnet-4-20250514

# ============ VISION PROVIDERS ============

# Primary vision provider for OCR (gemini, openai, anthropic)
VISION_PROVIDER=gemini

# Fallback providers (comma-separated, tried in order if primary fails)
VISION_FALLBACK_PROVIDERS=openai,anthropic

# Timeout for vision API requests (seconds)
VISION_TIMEOUT_SEC=30

# Max retries per provider before fallback
VISION_MAX_RETRIES=1

# ============ IMAGE EDITING ============

# Image editor for text replacement (paddleocr, gemini, openai)
# - paddleocr: Local PaddleOCR + PIL (95%+ reliability, preserves chart grids)
# - gemini: Gemini 2.5 Flash Image API ($0.039/image)
# - openai: OpenAI gpt-image-1 API ($0.02-0.19/image)
IMAGE_EDITOR=paddleocr

# Fallback image editor if primary fails
IMAGE_EDITOR_FALLBACK=gemini

# OpenAI model for image editing (only if IMAGE_EDITOR=openai)
OPENAI_IMAGE_MODEL=gpt-image-1

# ============ GOOGLE TRANSLATE (Fallback) ============

# Optional: Only needed if using paid tier
# If not set, free tier will be used via googletrans library
GOOGLE_TRANSLATE_API_KEY=

# ============ DATABASE ============

POSTGRES_USER=postgres
POSTGRES_PASSWORD=secure_password_here
POSTGRES_DB=signal_bot
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Set to True for SQL debug logs (development only)
SQLALCHEMY_ECHO=False

# ============ REDIS (Optional) ============

# Used for session persistence and translation cache
# If not set, in-memory cache will be used
REDIS_URL=redis://redis:6379/0

# Redis port (change if 6379 is already in use)
REDIS_PORT=6379

# ============ APPLICATION ============

# Log levels: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Environment: development, staging, production
ENVIRONMENT=production

# Retry configuration
MAX_RETRIES=3

# Timeout settings (in seconds)
TIMEOUT_GEMINI_SEC=30
TIMEOUT_TELEGRAM_SEC=15

# ============ MEDIA ============

# Directory to store downloaded images temporarily
MEDIA_DOWNLOAD_DIR=/tmp/signals

# Maximum image size to process (in MB)
MAX_IMAGE_SIZE_MB=50

# ============ PORTS ============

# API port for health check endpoint (default: 8000)
API_PORT=8000
